{"ast":null,"code":"import _slicedToArray from\"/home/portfolio/website/web-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/home/portfolio/website/web-ui/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useState,useEffect}from'react';import{connect}from'react-redux';import{useLocation,Redirect}from'react-router-dom';import{ListContainer}from'./WorkElements';import{motion}from\"framer-motion\";import MobileTopButton from'../MobileTopButton';import{Container,Header,NavButtons,PrevWork,NextWork,Back,Content,FixedContent,Title,TagsContainer,Tag,Details,Images,PicContainer,Thumbnails,ThumbnailSelector,PicScroll,LeftSection,Controls,RightSection,Label,PicDesc}from'./WorkExpandedElements';import e from'lax.js';// import { load_defaults } from '../../api';\n// import { restore_session } from '../../store';\n// restore_session();\n// load_defaults();\nimport{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var WorkExpanded=function WorkExpanded(_ref){var projects=_ref.projects;// useEffect(() => {\n//     window.addEventListener(\"beforeunload\", alertUser);\n//     return () => {\n//       window.removeEventListener(\"beforeunload\", window.location = \"http://localhost:3000/works\");\n//     };\n//   }, []);\n//   const alertUser = (e) => {\n//       console.log(\"redirect catch\");\n//       window.location = \"http://localhost:3000/works\";\n//       <Redirect push to=\"/works\"/>;\n//     e.preventDefault();\n//     // e.returnValue = \"\";\n//   };\nvar location=useLocation();var work_id=location.pathname.split(\"/works\")[0];// let work = get_project(work_id.substring(1, work_id.length));\nconsole.log(\"work viewed: \"+work_id);// console.log(work_id.substring(1, work_id.length));\n// console.log(\"projects length: \" + projects.length);\n// console.log(\"proj obj from api: \" + JSON.stringify(work));\nvar work=projects[work_id.substring(1,work_id.length)-1];// let prev_id = work_id;\nvar next_id;var prev_id;if(work.id==15){next_id=1;prev_id=parseInt(work_id.substring(1,work_id.length))-1;console.log(\"caught max case\");}else if(work.id==1){console.log(\"caught 0 case\");next_id=parseInt(work_id.substring(1,work_id.length))+1;prev_id=15;}else{next_id=parseInt(work_id.substring(1,work_id.length))+1;prev_id=parseInt(work_id.substring(1,work_id.length))-1;}// // let first = true;\n// if (work_id == 1) {\n//     prev_id = work_id;\n// } else {\n//     prev_id = work_id - 1;\n// }\n// var isLast = false;\n// if (work_id == projects.length) {\n//     isLast = true;\n// }\n//TODO triggers something when certain scroll level has been reached\n// const changeSelector = () => {\n//     if(window.scrollY >= 80) {\n//         setCurrImage(true);\n//     } else {\n//         setCurrImage(false);\n//     }\n// };\n// useEffect(() => {\n//     window.addEventListener('scroll', changeSelector)\n// }, []);\nvar totalImgs=work.imgs.length;var thumbHeight=36/totalImgs-1+\"vh\";// console.log(\"each thumb height: \" + thumbHeight);\n// height -> 36 / work\nconsole.log(\"imgs: \"+work.imgs);var imgVariants={initial:{opacity:0,y:\"100vh\",scale:0.9},in:{opacity:1,y:'0',scale:1},out:{opacity:0,// y: \"-100vh\",\nscale:0.9,transition:{type:\"tween\",ease:[0.7,0,0.13,1],duration:0.7}}};function Picture_Displayed(_ref2){var picture=_ref2.picture,index=_ref2.index;var index_int=index+1;var index_str='pic'+index_int;// console.log(\"does \" + picture + \" contain /: \" + picture.includes(\"/\"));\nvar is_last=false;if(work.imgs.length==1+index){is_last=true;}if(index==0){return/*#__PURE__*/_jsx(_Fragment,{});}else{if(picture.includes(\"/\")){var _jsx2;return/*#__PURE__*/_jsx(PicContainer,(_jsx2={id:index_str,index:index,isLast:is_last,as:motion.div,initial:\"initial\",animate:\"in\",exit:\"out\",variants:imgVariants,transition:{type:\"tween\",ease:[0.7,0,0.13,1],duration:0.85,delay:(index+1)*0.1}},_defineProperty(_jsx2,\"isLast\",is_last),_defineProperty(_jsx2,\"children\",/*#__PURE__*/_jsx(\"img\",{src:\"/imgs/\"+picture,alt:picture,id:\"project-img\"})),_jsx2));}else{return/*#__PURE__*/_jsx(PicDesc,{index:index,children:picture});}}}var _useState=useState(1),_useState2=_slicedToArray(_useState,2),currImage=_useState2[0],setCurrImage=_useState2[1];var updateCurrImage=function updateCurrImage(img_index){console.log(\"curr img index: \"+img_index);if(currImage!=img_index){setCurrImage(currImage);}};function Each_Thumbnail(_ref3){var picture=_ref3.picture,index=_ref3.index;var index_int=index+1;var index_str='pic'+index_int;console.log(\"total: \"+totalImgs);return/*#__PURE__*/_jsx(PicScroll,{to:index_str,smooth:true,duration:500,spy:true,offset:-80,exact:\"true\",relHeight:thumbHeight,children:/*#__PURE__*/_jsx(\"img\",{src:\"/imgs/\"+picture,style:{maxHeight:'100%',maxWidth:'100%',border:'.5px solid black'},id:\"project-img\",alt:picture})});};function Tags(_ref4){var tag=_ref4.tag;return/*#__PURE__*/_jsx(Tag,{children:tag});};var pictures_displayed=work.imgs.map(function(picture,index){return/*#__PURE__*/_jsx(Picture_Displayed,{picture:picture,index:index},picture.id);});var thumbnails_displayed=work.imgs.map(function(picture,index){return/*#__PURE__*/_jsx(Each_Thumbnail,{picture:picture,index:index},picture.id);});var tags_displayed=work.tags.map(function(tag){return/*#__PURE__*/_jsx(Tags,{tag:tag},tag.id);});var leftVariants={initial:{opacity:0,y:'0',// y: \"-100vh\",\nscale:0.9},in:{opacity:1,// y: '2.5rem',\nscale:1},out:{opacity:0,// y: \"-100vh\",\nscale:1}};var controlVariants={initial:{opacity:0,y:'0s',x:'1.5rem',// y: \"-100vh\",\nscale:0.9},in:{opacity:1,x:0,// y: '2.5rem',\nscale:1},out:{opacity:0,// y: \"-100vh\",\nscale:1}};var leftTransition={type:\"tween\",ease:[0.7,0,0.13,1],duration:0.6};var rightTransition={type:\"tween\",ease:[0.7,0,0.13,1],duration:0.85};return/*#__PURE__*/_jsxs(Container,{id:\"head\",as:motion.div,initial:\"initial\",animate:\"in\",exit:\"out\",children:[/*#__PURE__*/_jsxs(LeftSection,{as:motion.div,initial:\"initial\",animate:\"in\",exit:\"out\",variants:leftVariants,transition:leftTransition,children:[/*#__PURE__*/_jsx(Title,{children:work.name}),/*#__PURE__*/_jsx(Label,{children:\"OVERVIEW\"}),/*#__PURE__*/_jsx(Details,{children:work.desc}),/*#__PURE__*/_jsx(Label,{children:\"TOOLS\"}),/*#__PURE__*/_jsx(TagsContainer,{children:tags_displayed})]}),/*#__PURE__*/_jsx(RightSection// as={motion.div}\n// initial=\"initial\"\n// animate=\"in\"\n// exit=\"out\"\n// transition={leftTransition}\n,{children:pictures_displayed}),/*#__PURE__*/_jsxs(Controls,{as:motion.div,initial:\"initial\",animate:\"in\",exit:\"out\",children:[/*#__PURE__*/_jsx(Header,{as:motion.div,initial:\"initial\",animate:\"in\",exit:\"out\",variants:controlVariants,transition:{type:\"tween\",ease:[0.7,0,0.13,1],duration:0.6,delay:0.3},children:/*#__PURE__*/_jsx(Back,{to:\"/works\",children:\"Back\"})}),/*#__PURE__*/_jsxs(NavButtons,{as:motion.div,initial:\"initial\",animate:\"in\",exit:\"out\",variants:controlVariants,transition:{type:\"tween\",ease:[0.7,0,0.13,1],duration:0.6,delay:0.3},children:[/*#__PURE__*/_jsx(PrevWork,{to:\"/\"+prev_id+\"/works\",currId:work.id,children:\"Previous\"}),/*#__PURE__*/_jsx(NextWork,{to:\"/\"+next_id+\"/works\",currId:work.id,children:\"Next\"})]})]})]});};// load_defaults();\nexport default connect(function(_ref5){var projects=_ref5.projects;return{projects:projects};})(WorkExpanded);","map":{"version":3,"sources":["/home/portfolio/website/web-ui/src/components/Works/WorkExpanded.js"],"names":["React","useState","useEffect","connect","useLocation","Redirect","ListContainer","motion","MobileTopButton","Container","Header","NavButtons","PrevWork","NextWork","Back","Content","FixedContent","Title","TagsContainer","Tag","Details","Images","PicContainer","Thumbnails","ThumbnailSelector","PicScroll","LeftSection","Controls","RightSection","Label","PicDesc","e","WorkExpanded","projects","location","work_id","pathname","split","console","log","work","substring","length","next_id","prev_id","id","parseInt","totalImgs","imgs","thumbHeight","imgVariants","initial","opacity","y","scale","in","out","transition","type","ease","duration","Picture_Displayed","picture","index","index_int","index_str","is_last","includes","div","delay","currImage","setCurrImage","updateCurrImage","img_index","Each_Thumbnail","maxHeight","maxWidth","border","Tags","tag","pictures_displayed","map","thumbnails_displayed","tags_displayed","tags","leftVariants","controlVariants","x","leftTransition","rightTransition","name","desc"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { useLocation, Redirect } from 'react-router-dom';\nimport { ListContainer } from './WorkElements';\nimport { motion } from \"framer-motion\";\nimport MobileTopButton from '../MobileTopButton';\nimport { Container, Header, NavButtons, PrevWork, NextWork, Back, Content, FixedContent, Title, TagsContainer, Tag, Details, Images, PicContainer, Thumbnails, ThumbnailSelector, PicScroll, LeftSection, Controls, RightSection, Label, PicDesc } from './WorkExpandedElements';\nimport e from 'lax.js';\n// import { load_defaults } from '../../api';\n// import { restore_session } from '../../store';\n\n// restore_session();\n// load_defaults();\n\nconst WorkExpanded = ({ projects }) => {\n\n    // useEffect(() => {\n    //     window.addEventListener(\"beforeunload\", alertUser);\n    //     return () => {\n    //       window.removeEventListener(\"beforeunload\", window.location = \"http://localhost:3000/works\");\n    //     };\n    //   }, []);\n    //   const alertUser = (e) => {\n    //       console.log(\"redirect catch\");\n    //       window.location = \"http://localhost:3000/works\";\n    //       <Redirect push to=\"/works\"/>;\n    //     e.preventDefault();\n    //     // e.returnValue = \"\";\n    //   };\n\n    const location = useLocation();\n    let work_id = location.pathname.split(\"/works\")[0];\n    // let work = get_project(work_id.substring(1, work_id.length));\n    \n\n    console.log(\"work viewed: \" + work_id);\n    // console.log(work_id.substring(1, work_id.length));\n    // console.log(\"projects length: \" + projects.length);\n    // console.log(\"proj obj from api: \" + JSON.stringify(work));\n    \n    let work = projects[work_id.substring(1, work_id.length) - 1];\n\n    // let prev_id = work_id;\n    var next_id;\n    var prev_id;\n\n    if (work.id == 15) {\n        next_id = 1;\n        prev_id = parseInt(work_id.substring(1, work_id.length)) - 1;\n        console.log(\"caught max case\");\n    } else if (work.id == 1) {\n        console.log(\"caught 0 case\");\n        next_id = parseInt(work_id.substring(1, work_id.length)) + 1; \n        prev_id = 15;\n    } else {\n        next_id = parseInt(work_id.substring(1, work_id.length)) + 1; \n        prev_id = parseInt(work_id.substring(1, work_id.length)) - 1;\n    }\n\n    // // let first = true;\n    // if (work_id == 1) {\n    //     prev_id = work_id;\n    // } else {\n    //     prev_id = work_id - 1;\n    // }\n\n    // var isLast = false;\n    // if (work_id == projects.length) {\n    //     isLast = true;\n    // }\n    \n    //TODO triggers something when certain scroll level has been reached\n    // const changeSelector = () => {\n    //     if(window.scrollY >= 80) {\n    //         setCurrImage(true);\n    //     } else {\n    //         setCurrImage(false);\n    //     }\n    // };\n\n    // useEffect(() => {\n    //     window.addEventListener('scroll', changeSelector)\n    // }, []);\n    \n    let totalImgs = work.imgs.length;\n    let thumbHeight = ((36 / totalImgs) - 1) + \"vh\";\n    // console.log(\"each thumb height: \" + thumbHeight);\n    // height -> 36 / work\n\n    console.log(\"imgs: \" + work.imgs);\n\n    const imgVariants = {\n        initial: {\n            opacity: 0,\n            y: \"100vh\",\n            scale: 0.9,\n        },\n        in: {\n            opacity: 1,\n            y: '0',\n            scale: 1,\n        },\n        out: {\n            opacity: 0,\n            // y: \"-100vh\",\n            scale: 0.9,\n            transition: {\n                type: \"tween\",\n                ease: [0.7, 0, 0.13, 1],\n                duration: 0.7,\n            }\n        },  \n    };\n\n    function Picture_Displayed({picture, index}) {\n        let index_int = index + 1; \n        let index_str = 'pic' + index_int;\n        // console.log(\"does \" + picture + \" contain /: \" + picture.includes(\"/\"));\n\n        let is_last = false;\n\n        if (work.imgs.length == (1 + index)) {\n            is_last = true;\n        } \n\n        if (index == 0) {\n            return (\n                <></>\n            )\n        } else {\n            if (picture.includes(\"/\")) {\n                return (\n                    <PicContainer id={index_str}\n                        index={index}\n                        isLast={is_last}\n                        as={motion.div}\n                        initial=\"initial\"\n                        animate=\"in\"\n                        exit=\"out\"\n                        variants={imgVariants}\n                        transition={{\n                            type: \"tween\",\n                            ease: [0.7, 0, 0.13, 1],\n                            duration: 0.85,\n                            delay: (index + 1) * 0.1,\n                        }}\n                        isLast={is_last}\n                        >\n                        <img src={\"/imgs/\" + picture} alt={picture} id=\"project-img\"></img>    \n                    </PicContainer>\n                );\n            }\n           else {\n               return (\n                   <PicDesc\n                    index={index}\n                   >\n                       {picture}\n                   </PicDesc>\n               )\n           }\n        }\n    }\n\n    const [currImage, setCurrImage] = useState(1);\n\n    const updateCurrImage = (img_index) => {\n        console.log(\"curr img index: \" + img_index);\n        if (currImage != img_index) {\n            setCurrImage(currImage);\n        }\n    };\n\n    function Each_Thumbnail({picture, index}) {\n        let index_int = index + 1; \n        let index_str = 'pic' + index_int;\n        console.log(\"total: \" + totalImgs);\n\n        return (\n            <PicScroll to={index_str} smooth={true} duration={500} spy={true} \n                offset={-80} exact=\"true\" relHeight={thumbHeight}>\n                <img src={\"/imgs/\" + picture} style={{maxHeight: '100%', maxWidth: '100%', border: '.5px solid black'}} id=\"project-img\" alt={picture}></img>    \n            </PicScroll>\n        )\n    };\n\n    function Tags({tag}) {\n        return (\n            <Tag>{tag}</Tag>\n        )\n    };\n\n    const pictures_displayed = work.imgs.map((picture, index) => (\n        <Picture_Displayed picture={picture} key={picture.id} index={index} />\n    ));\n\n    const thumbnails_displayed = work.imgs.map((picture, index) => (\n        <Each_Thumbnail picture={picture} key={picture.id} index={index} />\n    ));\n\n    const tags_displayed = work.tags.map((tag) => (\n        <Tags tag={tag} key={tag.id} />\n    ));\n\n    const leftVariants = {\n        initial: {\n            opacity: 0,\n            y: '0',\n            // y: \"-100vh\",\n            scale: 0.9,\n        },\n        in: {\n            opacity: 1,\n            // y: '2.5rem',\n            scale: 1,\n        },\n        out: {\n            opacity: 0,\n            // y: \"-100vh\",\n            scale: 1,\n        },\n    };\n\n    const controlVariants = {\n        initial: {\n            opacity: 0,\n            y: '0s',\n            x: '1.5rem',\n            // y: \"-100vh\",\n            scale: 0.9,\n        },\n        in: {\n            opacity: 1,\n            x: 0,\n            // y: '2.5rem',\n            scale: 1,\n        },\n        out: {\n            opacity: 0,\n            // y: \"-100vh\",\n            scale: 1,\n        },\n    };\n\n    const leftTransition = {\n        type: \"tween\",\n        ease: [0.7, 0, 0.13, 1],\n        duration: 0.6,\n    }\n\n    const rightTransition = {\n        type: \"tween\",\n        ease: [0.7, 0, 0.13, 1],\n        duration: 0.85,\n    }\n\n    return (\n        <Container id='head'\n            as={motion.div}\n            initial=\"initial\"\n            animate=\"in\"\n            exit=\"out\">\n\n            <LeftSection\n                as={motion.div}\n                initial=\"initial\"\n                animate=\"in\"\n                exit=\"out\"\n                variants={leftVariants}\n                transition={leftTransition}>\n                    {/* {work.id}  */}\n                    <Title>{work.name}</Title>\n                    <Label>OVERVIEW</Label>\n                    <Details>{work.desc}</Details>\n                    <Label>TOOLS</Label>\n                    <TagsContainer>{tags_displayed}</TagsContainer>\n            </LeftSection>\n\n            <RightSection\n                // as={motion.div}\n                // initial=\"initial\"\n                // animate=\"in\"\n                // exit=\"out\"\n                // transition={leftTransition}\n            >\n                {pictures_displayed}\n            </RightSection>\n\n            <Controls\n                as={motion.div}\n                initial=\"initial\"\n                animate=\"in\"\n                exit=\"out\"\n            >\n                    <Header as={motion.div}\n                        initial=\"initial\"\n                        animate=\"in\"\n                        exit=\"out\"\n                        variants={controlVariants}\n                        transition={{type: \"tween\",\n                        ease: [0.7, 0, 0.13, 1],\n                        duration: 0.6,\n                        delay: 0.3}}\n                    >\n                        <Back to=\"/works\">Back</Back>\n                    </Header>\n                    <NavButtons as={motion.div}\n                        initial=\"initial\"\n                        animate=\"in\"\n                        exit=\"out\"\n                        variants={controlVariants}\n                        transition={{type: \"tween\",\n                        ease: [0.7, 0, 0.13, 1],\n                        duration: 0.6,\n                        delay: 0.3}}\n                    >\n                        <PrevWork to={\"/\" + prev_id + \"/works\"} currId={work.id}>Previous</PrevWork>\n                        <NextWork to={\"/\" + next_id + \"/works\"} currId={work.id}>Next</NextWork>\n                    </NavButtons>\n            </Controls>\n\n            {/* <MobileTopButton /> */}\n        </Container>\n    );\n};\n  \n// load_defaults();\n\nexport default connect(({ projects }) => ({ projects }))(WorkExpanded);\n\n\n"]},"metadata":{},"sourceType":"module"}