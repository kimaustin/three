{"ast":null,"code":"import _slicedToArray from\"/home/portfolio/v2/web-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import{connect}from'react-redux';import{useLocation,Redirect}from'react-router-dom';import{ListContainer}from'./WorkElements';import{motion}from\"framer-motion\";import MobileTopButton from'../MobileTopButton';import{Container,Header,TableOfContents,Subsection,Fancy,NavButtons,PrevWork,NextWork,Back,Content,FixedContent,Title,TagsContainer,Tag,Details,Overview,PicContainer,Thumbnails,ThumbnailSelector,PicScroll,LeftSection,Controls,RightSection,Label,PicDesc,HeaderDecorated,TOCItem,InsideHeaderLine,InsideHeaderContainer}from'./WorkExpandedElements';// import { Work } from './SingleWorkElements';\n// import { load_defaults } from '../../api';\n// import { restore_session } from '../../store';\n// const WorkExpanded = () => {\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var WorkExpanded=function WorkExpanded(_ref){var projects=_ref.projects;// useEffect(() => {\n//     window.addEventListener(\"beforeunload\", alertUser);\n//     return () => {\n//       window.removeEventListener(\"beforeunload\", window.location = \"http://localhost:3000/works\");\n//     };\n//   }, []);\n//   const alertUser = (e) => {\n//       console.log(\"redirect catch\");\n//       window.location = \"http://localhost:3000/works\";\n//       <Redirect push to=\"/works\"/>;\n//     e.preventDefault();\n//     // e.returnValue = \"\";\n//   };\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),showTOC=_useState2[0],setShowTOC=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currImage=_useState4[0],setCurrImage=_useState4[1];// const ref = useRef();\nvar location=useLocation();var work_id=location.pathname.split(\"/works\")[0];// let work = get_project(work_id.substring(1, work_id.length));\n// // console.log(\"work viewed: \" + work_id);\n// // console.log(work_id.substring(1, work_id.length));\n// // console.log(\"projects length: \" + projects.length);\n// // console.log(\"proj obj from api: \" + JSON.stringify(work));\nvar work=projects[work_id.substring(1,work_id.length)];console.log('selected work',work);// // let prev_id = work_id;\n// var next_id;\n// var prev_id;\n// if (work.id == 16) {\n//     next_id = 1;\n//     prev_id = parseInt(work_id.substring(1, work_id.length)) - 1;\n//     console.log(\"caught max case\");\n// } else if (work.id == 1) {\n//     console.log(\"caught 0 case\");\n//     next_id = parseInt(work_id.substring(1, work_id.length)) + 1; \n//     prev_id = 16;\n// } else {\n//     next_id = parseInt(work_id.substring(1, work_id.length)) + 1; \n//     prev_id = parseInt(work_id.substring(1, work_id.length)) - 1;\n// }\n// // let first = true;\n// if (work_id == 1) {\n//     prev_id = work_id;\n// } else {\n//     prev_id = work_id - 1;\n// }\nvar isLast=false;if(work_id==projects.length){isLast=true;}// TODO triggers something when certain scroll level has been reached\n// const changeSelector = () => {\n//     // if scroll = project number * divided value\n//     if(window.scrollY >= 80) {\n//         // setCurrImage(true);\n//     } else {\n//         // setCurrImage(false);\n//     }\n// };\n// useEffect(() => {\n//     window.addEventListener('scroll', changeSelector)\n// }, []);\n// let work = { id: '1', content: ['', 'SS:Introduction', 'THIS IS THE INTRODUCTION', '/test/pic1.png', '/test/pic2.png', 'THIS IS A DESCRIPTION', 'SS:Section 2', '/test/pic3.png',  '/test/pic4.png', 'SS:Last Section', 'THIS IS A DESCRIPTION', '/test/pic3.png'], tags: ['tag 1', 'tag 2', 'tag 3'], name: 'project 1 name', desc: 'work description', isCS: false, date: 'March 2022' };\n// let totalImgs = work.imgs.length;\n// let thumbHeight = ((36 / totalImgs) - 1) + \"vh\";\n// console.log(\"each thumb height: \" + thumbHeight);\n// height -> 36 / work\nconsole.log(\"imgs: \"+work.imgs);var imgVariants={initial:{opacity:0,y:\"100vh\",scale:0.9},in:{opacity:1,y:'0',scale:1},out:{opacity:0,// y: \"-100vh\",\nscale:0.9,transition:{type:\"tween\",ease:[0.7,0,0.13,1],duration:0.7}}};var myPicRefs=[];myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());myPicRefs.push(useRef());var handleClick=function handleClick(index){var _myPicRefs$index$curr;// console.log('index', index, myPicRefs);\n// console.log('ref clicked', myPicRefs[index].current);\n(_myPicRefs$index$curr=myPicRefs[index].current)===null||_myPicRefs$index$curr===void 0?void 0:_myPicRefs$index$curr.scrollIntoView({behavior:'smooth'});};// MAIN CONTENT HANDLER --------->\nfunction Picture_Displayed(_ref2){var picture=_ref2.picture,index=_ref2.index;var index_int=index+1;var index_str='pic'+index_int;// console.log(\"does \" + picture + \" contain /: \" + picture.includes(\"/\"));\n// console.log('content', picture, index);        \n// let is_last = false;\n// if (work.imgs.length == (1 + index)) {\n//     is_last = true;\n// } \nif(index==0){return/*#__PURE__*/_jsxs(Header,{children:[/*#__PURE__*/_jsxs(HeaderDecorated,{children:[/*#__PURE__*/_jsx(Fancy,{children:\" { \"}),/*#__PURE__*/_jsxs(InsideHeaderContainer,{children:[/*#__PURE__*/_jsx(InsideHeaderLine,{children:work.semester}),/*#__PURE__*/_jsx(InsideHeaderLine,{children:work.name})]}),/*#__PURE__*/_jsx(Fancy,{children:\" } \"})]}),/*#__PURE__*/_jsx(Overview,{children:work.desc})]});}else{if(picture.includes(\"/\")){return/*#__PURE__*/_jsx(PicContainer,{id:index_str,index:index// isLast={is_last}\n,as:motion.div,initial:\"initial\",animate:\"in\",exit:\"out\",variants:imgVariants,transition:{type:\"tween\",ease:[0.7,0,0.13,1],duration:0.85,delay:(index+1)*0.1},children:/*#__PURE__*/_jsx(\"img\",{src:\"/imgs/\"+picture,alt:picture,id:\"project-img\"})});}else if(picture.startsWith('SS:')){var header_name=picture.slice('3');return/*#__PURE__*/_jsx(Subsection,{ref:myPicRefs[index],children:header_name});}else{return/*#__PURE__*/_jsx(PicDesc,{index:index// isLast={is_last}\n,as:motion.div,initial:\"initial\",animate:\"in\",exit:\"out\",variants:imgVariants,transition:{type:\"tween\",ease:[0.7,0,0.13,1],duration:0.85,delay:(index+1)*0.1},children:picture});}}}function ListofTOC(_ref3){var subsection=_ref3.subsection,index=_ref3.index;if(subsection.startsWith('SS:')){setShowTOC(true);var header_name=subsection.slice(3);return/*#__PURE__*/_jsx(TOCItem,{onClick:function onClick(){return handleClick(index);},children:header_name});}else{return/*#__PURE__*/_jsx(_Fragment,{});}}var updateCurrImage=function updateCurrImage(img_index){// console.log(\"curr img index: \" + img_index);\nif(currImage!=img_index){setCurrImage(currImage);}};// function Each_Thumbnail({picture, index}) {\n//     let index_int = index + 1; \n//     let index_str = 'pic' + index_int;\n//     console.log(\"total: \" + totalImgs);\n//     return (\n//         <PicScroll to={index_str} smooth={true} duration={500} spy={true} \n//             offset={-80} exact=\"true\" relHeight={thumbHeight}>\n//             <img src={\"/imgs/\" + picture} style={{maxHeight: '100%', maxWidth: '100%', border: '.5px solid black'}} id=\"project-img\" alt={picture}></img>    \n//         </PicScroll>\n//     )\n// };\nfunction Tags(_ref4){var tag=_ref4.tag;return/*#__PURE__*/_jsx(Tag,{children:tag});};var pictures_displayed=work.imgs.map(function(picture,index){return/*#__PURE__*/_jsx(Picture_Displayed,{picture:picture,index:index},picture.id);});var table_of_contents=work.imgs.map(function(subsection,index){return/*#__PURE__*/ (// <Get_TOC subsection={subsection} key={subsection.id} index={index}/>\n_jsx(ListofTOC,{subsection:subsection,index:index},subsection.id)// <TOCItem>{subsection}</TOCItem>\n);});// const thumbnails_displayed = work.content.map((picture, index) => (\n//     <Each_Thumbnail picture={picture} key={picture.id} index={index} />\n// ));\n// const tags_displayed = work.tags.map((tag) => (\n//     <Tags tag={tag} key={tag.id} />\n// ));\nvar leftVariants={initial:{opacity:0,y:'0',// y: \"-100vh\",\nscale:0.9},in:{opacity:1,// y: '2.5rem',\nscale:1},out:{opacity:0,// y: \"-100vh\",\nscale:1}};var controlVariants={initial:{opacity:0,y:'0s',x:'1.5rem',// y: \"-100vh\",\nscale:0.9},in:{opacity:1,x:0,// y: '2.5rem',\nscale:1},out:{opacity:0,// y: \"-100vh\",\nscale:1}};var leftTransition={type:\"tween\",ease:[0.7,0,0.13,1],duration:0.6};var rightTransition={type:\"tween\",ease:[0.7,0,0.13,1],duration:0.85};return/*#__PURE__*/_jsxs(Container,{id:\"head\"// as={motion.div}\n// initial=\"initial\"\n// animate=\"in\"\n// exit=\"out\"\n,children:[/*#__PURE__*/_jsx(RightSection,{as:motion.div,initial:{y:'100vh'},animate:{y:0},exit:{y:'-100vh',transition:{type:\"tween\",ease:[0.7,0,0.13,1],duration:.7}},transition:{type:\"tween\",ease:[0.7,0,0.13,1],duration:1.2},children:pictures_displayed}),/*#__PURE__*/_jsxs(Controls,{as:motion.div,initial:{x:'-100vw'},animate:{x:0},exit:{x:'-100vw'},transition:{type:\"tween\",ease:[0.7,0,0.13,1],duration:0.7},children:[/*#__PURE__*/_jsx(Back,{to:\"/works\",children:\"\\uFFE9 All Works\"}),/*#__PURE__*/_jsxs(TableOfContents,{children:[/*#__PURE__*/_jsxs(\"p\",{style:{paddingBottom:'6px'},children:[\" \",showTOC?'Study Overview':'']}),table_of_contents]}),/*#__PURE__*/_jsx(Back,{href:\"https://www.junehomes.com\",target:\"_blank\",children:\"Visit\"})]})]});};// load_defaults();\n// export default WorkExpanded;\nexport default connect(function(_ref5){var projects=_ref5.projects;return{projects:projects};})(WorkExpanded);","map":{"version":3,"sources":["/home/portfolio/v2/web-ui/src/components/Works/WorkExpanded.js"],"names":["React","useState","useEffect","useRef","connect","useLocation","Redirect","ListContainer","motion","MobileTopButton","Container","Header","TableOfContents","Subsection","Fancy","NavButtons","PrevWork","NextWork","Back","Content","FixedContent","Title","TagsContainer","Tag","Details","Overview","PicContainer","Thumbnails","ThumbnailSelector","PicScroll","LeftSection","Controls","RightSection","Label","PicDesc","HeaderDecorated","TOCItem","InsideHeaderLine","InsideHeaderContainer","WorkExpanded","projects","showTOC","setShowTOC","currImage","setCurrImage","location","work_id","pathname","split","work","substring","length","console","log","isLast","imgs","imgVariants","initial","opacity","y","scale","in","out","transition","type","ease","duration","myPicRefs","push","handleClick","index","current","scrollIntoView","behavior","Picture_Displayed","picture","index_int","index_str","semester","name","desc","includes","div","delay","startsWith","header_name","slice","ListofTOC","subsection","updateCurrImage","img_index","Tags","tag","pictures_displayed","map","id","table_of_contents","leftVariants","controlVariants","x","leftTransition","rightTransition","paddingBottom"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { useLocation, Redirect } from 'react-router-dom';\nimport { ListContainer } from './WorkElements';\nimport { motion } from \"framer-motion\";\nimport MobileTopButton from '../MobileTopButton';\nimport { Container, Header, TableOfContents, Subsection, Fancy, NavButtons, PrevWork, NextWork, Back, Content, FixedContent, Title, TagsContainer, Tag, Details, Overview, PicContainer, Thumbnails, ThumbnailSelector, PicScroll, LeftSection, Controls, RightSection, Label, PicDesc, HeaderDecorated, TOCItem, InsideHeaderLine, InsideHeaderContainer } from './WorkExpandedElements';\n// import { Work } from './SingleWorkElements';\n// import { load_defaults } from '../../api';\n// import { restore_session } from '../../store';\n\n\n// const WorkExpanded = () => {\nconst WorkExpanded = ({ projects }) => {\n\n    // useEffect(() => {\n    //     window.addEventListener(\"beforeunload\", alertUser);\n    //     return () => {\n    //       window.removeEventListener(\"beforeunload\", window.location = \"http://localhost:3000/works\");\n    //     };\n    //   }, []);\n    //   const alertUser = (e) => {\n    //       console.log(\"redirect catch\");\n    //       window.location = \"http://localhost:3000/works\";\n    //       <Redirect push to=\"/works\"/>;\n    //     e.preventDefault();\n    //     // e.returnValue = \"\";\n    //   };\n\n    const [showTOC, setShowTOC] = useState(false);\n    const [currImage, setCurrImage] = useState(1);\n\n    // const ref = useRef();\n\n\n    const location = useLocation();\n    let work_id = location.pathname.split(\"/works\")[0];\n    // let work = get_project(work_id.substring(1, work_id.length));\n\n    // // console.log(\"work viewed: \" + work_id);\n    // // console.log(work_id.substring(1, work_id.length));\n    // // console.log(\"projects length: \" + projects.length);\n    // // console.log(\"proj obj from api: \" + JSON.stringify(work));\n    \n    let work = projects[work_id.substring(1, work_id.length)];\n\n    console.log('selected work', work);\n\n    // // let prev_id = work_id;\n    // var next_id;\n    // var prev_id;\n\n    // if (work.id == 16) {\n    //     next_id = 1;\n    //     prev_id = parseInt(work_id.substring(1, work_id.length)) - 1;\n    //     console.log(\"caught max case\");\n    // } else if (work.id == 1) {\n    //     console.log(\"caught 0 case\");\n    //     next_id = parseInt(work_id.substring(1, work_id.length)) + 1; \n    //     prev_id = 16;\n    // } else {\n    //     next_id = parseInt(work_id.substring(1, work_id.length)) + 1; \n    //     prev_id = parseInt(work_id.substring(1, work_id.length)) - 1;\n    // }\n\n    // // let first = true;\n    // if (work_id == 1) {\n    //     prev_id = work_id;\n    // } else {\n    //     prev_id = work_id - 1;\n    // }\n\n    var isLast = false;\n    if (work_id == projects.length) {\n        isLast = true;\n    }\n    \n    // TODO triggers something when certain scroll level has been reached\n    // const changeSelector = () => {\n    //     // if scroll = project number * divided value\n    //     if(window.scrollY >= 80) {\n    //         // setCurrImage(true);\n\n    //     } else {\n    //         // setCurrImage(false);\n    //     }\n    // };\n    \n    // useEffect(() => {\n    //     window.addEventListener('scroll', changeSelector)\n    // }, []);\n    \n    // let work = { id: '1', content: ['', 'SS:Introduction', 'THIS IS THE INTRODUCTION', '/test/pic1.png', '/test/pic2.png', 'THIS IS A DESCRIPTION', 'SS:Section 2', '/test/pic3.png',  '/test/pic4.png', 'SS:Last Section', 'THIS IS A DESCRIPTION', '/test/pic3.png'], tags: ['tag 1', 'tag 2', 'tag 3'], name: 'project 1 name', desc: 'work description', isCS: false, date: 'March 2022' };\n    \n    // let totalImgs = work.imgs.length;\n    // let thumbHeight = ((36 / totalImgs) - 1) + \"vh\";\n    // console.log(\"each thumb height: \" + thumbHeight);\n    // height -> 36 / work\n\n    console.log(\"imgs: \" + work.imgs);\n\n    const imgVariants = {\n        initial: {\n            opacity: 0,\n            y: \"100vh\",\n            scale: 0.9,\n        },\n        in: {\n            opacity: 1,\n            y: '0',\n            scale: 1,\n        },\n        out: {\n            opacity: 0,\n            // y: \"-100vh\",\n            scale: 0.9,\n            transition: {\n                type: \"tween\",\n                ease: [0.7, 0, 0.13, 1],\n                duration: 0.7,\n            }\n        },  \n    };\n\n    const myPicRefs = [];\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    myPicRefs.push(useRef());\n    \n    const handleClick = (index) => {\n        // console.log('index', index, myPicRefs);\n        // console.log('ref clicked', myPicRefs[index].current);\n        myPicRefs[index].current?.scrollIntoView({ behavior: 'smooth' });\n    }\n    \n    // MAIN CONTENT HANDLER --------->\n    function Picture_Displayed({picture, index}) {\n        let index_int = index + 1; \n        let index_str = 'pic' + index_int;\n        // console.log(\"does \" + picture + \" contain /: \" + picture.includes(\"/\"));\n        // console.log('content', picture, index);        \n\n        // let is_last = false;\n\n        // if (work.imgs.length == (1 + index)) {\n        //     is_last = true;\n        // } \n\n        if (index == 0) {\n            return (\n                <Header>\n                    <HeaderDecorated>\n                        <Fancy> &#123; </Fancy>\n                            <InsideHeaderContainer>\n                                <InsideHeaderLine>{work.semester}</InsideHeaderLine>\n                                <InsideHeaderLine>{work.name}</InsideHeaderLine>\n                            </InsideHeaderContainer>\n                        <Fancy> &#125; </Fancy>\n                    </HeaderDecorated>\n                    <Overview>\n                        {work.desc}\n                        {/* A series of three self-promotional posters. Explored which traits are core to my identity, and what differentiates me from my peers. Intended to express my identity in a way that creates emotional resonance in a memorable, yet authentic manner.  */}\n                    </Overview>\n                </Header>\n            );\n        } else {\n            if (picture.includes(\"/\")) {\n                return (\n                    <PicContainer id={index_str}\n                        index={index}\n                        // isLast={is_last}\n                        as={motion.div}\n                        initial=\"initial\"\n                        animate=\"in\"\n                        exit=\"out\"\n                        variants={imgVariants}\n                        transition={{\n                            type: \"tween\",\n                            ease: [0.7, 0, 0.13, 1],\n                            duration: 0.85,\n                            delay: (index + 1) * 0.1,\n                        }}\n                        >\n                        <img src={\"/imgs/\" + picture} alt={picture} id=\"project-img\"></img>   \n                        {/* <img src={\"imgs/\" + work.imgs[index]}/> */}\n                        {/* <img src={\"imgs/testProjCover0.png\"}/> */}\n                    </PicContainer>\n                );\n            } else if (picture.startsWith('SS:')) {\n                let header_name = picture.slice('3');\n\n                return (\n                    <Subsection ref={myPicRefs[index]}>\n                        {header_name}\n                    </Subsection>\n                )\n            } else {\n               return (\n                   <PicDesc\n                    index={index}\n                    // isLast={is_last}\n                    as={motion.div}\n                    initial=\"initial\"\n                    animate=\"in\"\n                    exit=\"out\"\n                    variants={imgVariants}\n                    transition={{\n                        type: \"tween\",\n                        ease: [0.7, 0, 0.13, 1],\n                        duration: 0.85,\n                        delay: (index + 1) * 0.1,\n                    }}\n                   >\n                       {picture}\n                   </PicDesc>\n               )\n           }\n        }\n    }\n\n\n    function ListofTOC({subsection, index}) {\n        if (subsection.startsWith('SS:')) {\n            setShowTOC(true);\n\n            let header_name = subsection.slice(3);\n\n            return (\n                <TOCItem onClick={()=> handleClick(index)}>{header_name}</TOCItem>\n            )\n        } else {\n            return (\n                <></>\n            )\n        }\n    }\n\n    const updateCurrImage = (img_index) => {\n        // console.log(\"curr img index: \" + img_index);\n        if (currImage != img_index) {\n            setCurrImage(currImage);\n        }\n    };\n\n    // function Each_Thumbnail({picture, index}) {\n    //     let index_int = index + 1; \n    //     let index_str = 'pic' + index_int;\n    //     console.log(\"total: \" + totalImgs);\n\n    //     return (\n    //         <PicScroll to={index_str} smooth={true} duration={500} spy={true} \n    //             offset={-80} exact=\"true\" relHeight={thumbHeight}>\n    //             <img src={\"/imgs/\" + picture} style={{maxHeight: '100%', maxWidth: '100%', border: '.5px solid black'}} id=\"project-img\" alt={picture}></img>    \n    //         </PicScroll>\n    //     )\n    // };\n\n    function Tags({tag}) {\n        return (\n            <Tag>{tag}</Tag>\n        )\n    };\n\n    const pictures_displayed = work.imgs.map((picture, index) => (\n        <Picture_Displayed picture={picture} key={picture.id} index={index} />\n    ));\n\n    const table_of_contents = work.imgs.map((subsection, index) => (\n        // <Get_TOC subsection={subsection} key={subsection.id} index={index}/>\n        <ListofTOC subsection={subsection} key={subsection.id} index={index} />\n        // <TOCItem>{subsection}</TOCItem>\n    ));\n\n    // const thumbnails_displayed = work.content.map((picture, index) => (\n    //     <Each_Thumbnail picture={picture} key={picture.id} index={index} />\n    // ));\n\n    // const tags_displayed = work.tags.map((tag) => (\n    //     <Tags tag={tag} key={tag.id} />\n    // ));\n\n\n\n    const leftVariants = {\n        initial: {\n            opacity: 0,\n            y: '0',\n            // y: \"-100vh\",\n            scale: 0.9,\n        },\n        in: {\n            opacity: 1,\n            // y: '2.5rem',\n            scale: 1,\n        },\n        out: {\n            opacity: 0,\n            // y: \"-100vh\",\n            scale: 1,\n        },\n    };\n\n    const controlVariants = {\n        initial: {\n            opacity: 0,\n            y: '0s',\n            x: '1.5rem',\n            // y: \"-100vh\",\n            scale: 0.9,\n        },\n        in: {\n            opacity: 1,\n            x: 0,\n            // y: '2.5rem',\n            scale: 1,\n        },\n        out: {\n            opacity: 0,\n            // y: \"-100vh\",\n            scale: 1,\n        },\n    };\n\n    const leftTransition = {\n        type: \"tween\",\n        ease: [0.7, 0, 0.13, 1],\n        duration: 0.6,\n    }\n\n    const rightTransition = {\n        type: \"tween\",\n        ease: [0.7, 0, 0.13, 1],\n        duration: 0.85,\n    }\n\n\n\n\n\n    return (\n        <Container id='head'\n            // as={motion.div}\n            // initial=\"initial\"\n            // animate=\"in\"\n            // exit=\"out\"\n        >\n            {/* <LeftSection\n                // as={motion.div}\n                // initial=\"initial\"\n                // animate=\"in\"\n                // exit=\"out\"\n                // variants={leftVariants}\n                // transition={leftTransition}\n            >\n                    {work.id} \n                    <Title>{work.name}</Title>\n                    <Label>OVERVIEW</Label>\n                    <Details>{work.desc}</Details>\n                    <Label>TOOLS</Label>\n                    <TagsContainer>{tags_displayed}</TagsContainer>\n            </LeftSection> */}\n\n            <RightSection\n                as={motion.div}\n                initial={{ y: '100vh' }}\n                animate={{ y: 0 }}\n                exit={{ y: '-100vh', transition: {\n                    type: \"tween\",\n                    ease: [0.7, 0, 0.13, 1],\n                    duration: .7}\n                }}\n                transition={{\n                    type: \"tween\",\n                    ease: [0.7, 0, 0.13, 1],\n                    duration: 1.2,\n                }}\n            >\n                {pictures_displayed}\n            </RightSection>\n\n            <Controls\n                as={motion.div}\n                initial={{ x: '-100vw' }}\n                animate={{ x: 0 }}\n                exit={{ x: '-100vw' }}\n                transition={{\n                    type: \"tween\",\n                    ease: [0.7, 0, 0.13, 1],\n                    duration: 0.7,\n                }}\n            >\n                <Back to=\"/works\">￩ All Works</Back>\n                <TableOfContents>\n                    {/* <TOCItem style={{ fontSize: '20px' }}>Study Overview</TOCItem> */}\n                    <p style={{ paddingBottom: '6px' }}> {showTOC ? 'Study Overview' : ''}</p>\n                    {table_of_contents}\n                </TableOfContents>\n                <Back href={\"https://www.junehomes.com\"} target=\"_blank\">Visit</Back>\n            </Controls>\n\n\n            {/* <MobileTopButton /> */}\n        </Container>\n    );\n};\n  \n// load_defaults();\n\n// export default WorkExpanded;\nexport default connect(({ projects }) => ({ projects }))(WorkExpanded);"]},"metadata":{},"sourceType":"module"}